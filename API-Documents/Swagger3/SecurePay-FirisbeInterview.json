{"openapi":"3.0.1","info":{"title":"SecurePay API for Firisbe Interview","description":"This API exposes endpoints to use sample payment service. Service anables saving customers and cards of the customers to mysql database and requesting payments to any external payment service providers. And if external payment service confirms that the payment is made card balance is updated and payment is recorded to payments table. Lastly, all payments can be queried by date interval or curtomer number or card number.<br />\r\n     <br /> Tech Stack:\r\n     <br />\r\n     <br /> Language: Java 17\r\n     <br /> Framework: Spring Boot 3.2.5\r\n     <br /> Database: MySql\r\n     <br /> DB Management: Spring Data JPA\r\n     <br /> Unit Tests: JUnit and Maven Surefire for test reports\r\n     <br /> Build Tool: Maven","contact":{"name":"Ozgur Yatmaz","url":"https://www.linkedin.com/in/ozguryatmaz","email":"ozguryatmaz@yandex.com"},"license":{"name":"MIT License","url":"https://choosealicense.com/licenses/mit/"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Server URL in Development environment"},{"url":"not-exist","description":"Server URL in Production environment"}],"tags":[{"name":"Payment controller","description":"Make  and query payments"},{"name":"Customer controller","description":"Add  and fetch customers"}],"paths":{"/payments/make-payment":{"post":{"tags":["Payment controller"],"summary":"Make Payment","description":"Sends payment request to external payment service and records the paymet details","operationId":"makePayment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentRequestDTO"}}},"required":true},"responses":{"200":{"description":"When payment is made succesfully","content":{"*/*":{"schema":{"type":"string"}}}},"400":{"description":"Bad Request"},"502":{"description":"When external payment service provider fail in completing the payment","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}},"500":{"description":"When external payment service provider retuning diffrent code implying unsucessfull payment","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}},"406":{"description":"When card balance is insufficient to make the payment","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}}}}},"/customer/add-customer":{"post":{"tags":["Customer controller"],"summary":"Add customer","description":"Adds  new customer to our database","operationId":"addCustomer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Customer"}}},"required":true},"responses":{"201":{"description":"When customer is successfully saved to data base","content":{"*/*":{"schema":{"type":"string"}}}},"400":{"description":"Bad Request"},"409":{"description":"When submitted data is in conflict with existing data in database or with itself","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}}}}},"/payments/fetch-payments":{"get":{"tags":["Payment controller"],"summary":"Fetch by customer or card number","description":"Fethc payments made with parameters card number or customer number","operationId":"getPaymentsBySearchCriteria","parameters":[{"name":"cardNumber","in":"query","required":false,"schema":{"type":"string"}},{"name":"customerNumber","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Payment"}}}}},"500":{"description":"When error being occured during querying database","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}}}}},"/payments/fetch-payments-bydate":{"get":{"tags":["Payment controller"],"summary":"Fetch by date interval","description":"Fethc payments made with parameters start date and end date","operationId":"getAllPaymentsbyDateInterval","parameters":[{"name":"startDate","in":"query","required":true,"schema":{"type":"string","format":"date"}},{"name":"endDate","in":"query","required":true,"schema":{"type":"string","format":"date"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Payment"}}}}},"500":{"description":"When error being occured during querying database","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}}}}},"/customer/get-all-customers":{"get":{"tags":["Customer controller"],"summary":"Fetch all customers","description":"Fetches all customers exist in our database","operationId":"getAllCustomers","responses":{"500":{"description":"When error being occured during querying database","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ErrorDetails"}}}},"200":{"description":"OK","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Customer"}}}}}}}}},"components":{"schemas":{"PaymentRequestDTO":{"required":["amount","cardNumber"],"type":"object","properties":{"cardNumber":{"type":"string","description":"Number of the card which will be associated to payment","example":"571-1"},"amount":{"type":"number","description":"Amount to be paid","format":"double","example":45.11}},"description":"Payment Request Model Information"},"ErrorDetails":{"type":"object","properties":{"timestamp":{"type":"string","description":"Time when error occured","format":"date-time"},"message":{"type":"string","description":"Error message"},"details":{"type":"string","description":"Further details about the error"}},"description":"Error Model Information"},"Card":{"type":"object","properties":{"cardNumber":{"type":"string","description":"Card number","example":"571-1"},"balance":{"type":"number","description":"Balance of the card","format":"double","example":1000.0}},"description":"Card Model Information"},"Customer":{"required":["customerNumber","email"],"type":"object","properties":{"name":{"type":"string","description":"Customer's name","example":"Ozgur"},"customerNumber":{"type":"string","description":"Unique customer number for name conflict","example":"114-1"},"email":{"type":"string","description":"Customer's email address must be unique","example":"ozguryatmaz@yandex.com"},"cards":{"type":"array","writeOnly":true,"items":{"$ref":"#/components/schemas/Card"}}},"description":"Customer Model Information"},"Payment":{"type":"object","properties":{"amount":{"type":"number","description":"payment amount","format":"double","example":19.57},"cardNumber":{"type":"string","description":"Card number of the payment made","example":"571-1"},"customerNumber":{"type":"string","description":"Payment owner's number","example":"114-1"},"paymentDate":{"type":"string","description":"Time when payment is processed","format":"date-time"}},"description":"Payment Model Information"}}}}